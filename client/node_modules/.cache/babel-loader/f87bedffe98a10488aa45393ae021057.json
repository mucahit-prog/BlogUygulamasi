{"ast":null,"code":"/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/removecolumncommand\n */\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport TableWalker from '../tablewalker';\nimport { findAncestor, updateNumericAttribute } from './utils';\n/**\n * The remove column command.\n *\n * The command is registered by {@link module:table/tableediting~TableEditing} as `'removeTableColumn'` editor command.\n *\n * To remove the column containing the selected cell, execute the command:\n *\n *\t\teditor.execute( 'removeTableColumn' );\n *\n * @extends module:core/command~Command\n */\n\nexport default class RemoveColumnCommand extends Command {\n  /**\n   * @inheritDoc\n   */\n  refresh() {\n    const editor = this.editor;\n    const selection = editor.model.document.selection;\n    const tableUtils = editor.plugins.get('TableUtils');\n    const tableCell = findAncestor('tableCell', selection.getFirstPosition());\n    this.isEnabled = !!tableCell && tableUtils.getColumns(tableCell.parent.parent) > 1;\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  execute() {\n    const model = this.editor.model;\n    const selection = model.document.selection;\n    const firstPosition = selection.getFirstPosition();\n    const tableCell = findAncestor('tableCell', firstPosition);\n    const tableRow = tableCell.parent;\n    const table = tableRow.parent;\n    const headingColumns = table.getAttribute('headingColumns') || 0;\n    const row = table.getChildIndex(tableRow); // Cache the table before removing or updating colspans.\n\n    const tableMap = [...new TableWalker(table)]; // Get column index of removed column.\n\n    const cellData = tableMap.find(value => value.cell === tableCell);\n    const removedColumn = cellData.column;\n    model.change(writer => {\n      // Update heading columns attribute if removing a row from head section.\n      if (headingColumns && row <= headingColumns) {\n        writer.setAttribute('headingColumns', headingColumns - 1, table);\n      }\n\n      for (const {\n        cell,\n        column,\n        colspan\n      } of tableMap) {\n        // If colspaned cell overlaps removed column decrease it's span.\n        if (column <= removedColumn && colspan > 1 && column + colspan > removedColumn) {\n          updateNumericAttribute('colspan', colspan - 1, cell, writer);\n        } else if (column === removedColumn) {\n          // The cell in removed column has colspan of 1.\n          writer.remove(cell);\n        }\n      }\n    });\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Valanis/Desktop/React-Docs-Practice/BlogUygulamasÄ±/client/node_modules/@ckeditor/ckeditor5-table/src/commands/removecolumncommand.js"],"names":["Command","TableWalker","findAncestor","updateNumericAttribute","RemoveColumnCommand","refresh","editor","selection","model","document","tableUtils","plugins","get","tableCell","getFirstPosition","isEnabled","getColumns","parent","execute","firstPosition","tableRow","table","headingColumns","getAttribute","row","getChildIndex","tableMap","cellData","find","value","cell","removedColumn","column","change","writer","setAttribute","colspan","remove"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAEA,OAAOA,OAAP,MAAoB,sCAApB;AAEA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,SAASC,YAAT,EAAuBC,sBAAvB,QAAqD,SAArD;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,MAAMC,mBAAN,SAAkCJ,OAAlC,CAA0C;AACxD;AACD;AACA;AACCK,EAAAA,OAAO,GAAG;AACT,UAAMC,MAAM,GAAG,KAAKA,MAApB;AACA,UAAMC,SAAS,GAAGD,MAAM,CAACE,KAAP,CAAaC,QAAb,CAAsBF,SAAxC;AACA,UAAMG,UAAU,GAAGJ,MAAM,CAACK,OAAP,CAAeC,GAAf,CAAoB,YAApB,CAAnB;AAEA,UAAMC,SAAS,GAAGX,YAAY,CAAE,WAAF,EAAeK,SAAS,CAACO,gBAAV,EAAf,CAA9B;AAEA,SAAKC,SAAL,GAAiB,CAAC,CAACF,SAAF,IAAeH,UAAU,CAACM,UAAX,CAAuBH,SAAS,CAACI,MAAV,CAAiBA,MAAxC,IAAmD,CAAnF;AACA;AAED;AACD;AACA;;;AACCC,EAAAA,OAAO,GAAG;AACT,UAAMV,KAAK,GAAG,KAAKF,MAAL,CAAYE,KAA1B;AACA,UAAMD,SAAS,GAAGC,KAAK,CAACC,QAAN,CAAeF,SAAjC;AAEA,UAAMY,aAAa,GAAGZ,SAAS,CAACO,gBAAV,EAAtB;AAEA,UAAMD,SAAS,GAAGX,YAAY,CAAE,WAAF,EAAeiB,aAAf,CAA9B;AACA,UAAMC,QAAQ,GAAGP,SAAS,CAACI,MAA3B;AACA,UAAMI,KAAK,GAAGD,QAAQ,CAACH,MAAvB;AAEA,UAAMK,cAAc,GAAGD,KAAK,CAACE,YAAN,CAAoB,gBAApB,KAA0C,CAAjE;AACA,UAAMC,GAAG,GAAGH,KAAK,CAACI,aAAN,CAAqBL,QAArB,CAAZ,CAXS,CAaT;;AACA,UAAMM,QAAQ,GAAG,CAAE,GAAG,IAAIzB,WAAJ,CAAiBoB,KAAjB,CAAL,CAAjB,CAdS,CAgBT;;AACA,UAAMM,QAAQ,GAAGD,QAAQ,CAACE,IAAT,CAAeC,KAAK,IAAIA,KAAK,CAACC,IAAN,KAAejB,SAAvC,CAAjB;AACA,UAAMkB,aAAa,GAAGJ,QAAQ,CAACK,MAA/B;AAEAxB,IAAAA,KAAK,CAACyB,MAAN,CAAcC,MAAM,IAAI;AACvB;AACA,UAAKZ,cAAc,IAAIE,GAAG,IAAIF,cAA9B,EAA+C;AAC9CY,QAAAA,MAAM,CAACC,YAAP,CAAqB,gBAArB,EAAuCb,cAAc,GAAG,CAAxD,EAA2DD,KAA3D;AACA;;AAED,WAAM,MAAM;AAAES,QAAAA,IAAF;AAAQE,QAAAA,MAAR;AAAgBI,QAAAA;AAAhB,OAAZ,IAAyCV,QAAzC,EAAoD;AACnD;AACA,YAAKM,MAAM,IAAID,aAAV,IAA2BK,OAAO,GAAG,CAArC,IAA0CJ,MAAM,GAAGI,OAAT,GAAmBL,aAAlE,EAAkF;AACjF5B,UAAAA,sBAAsB,CAAE,SAAF,EAAaiC,OAAO,GAAG,CAAvB,EAA0BN,IAA1B,EAAgCI,MAAhC,CAAtB;AACA,SAFD,MAEO,IAAKF,MAAM,KAAKD,aAAhB,EAAgC;AACtC;AACAG,UAAAA,MAAM,CAACG,MAAP,CAAeP,IAAf;AACA;AACD;AACD,KAfD;AAgBA;;AArDuD","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/removecolumncommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\n\nimport TableWalker from '../tablewalker';\nimport { findAncestor, updateNumericAttribute } from './utils';\n\n/**\n * The remove column command.\n *\n * The command is registered by {@link module:table/tableediting~TableEditing} as `'removeTableColumn'` editor command.\n *\n * To remove the column containing the selected cell, execute the command:\n *\n *\t\teditor.execute( 'removeTableColumn' );\n *\n * @extends module:core/command~Command\n */\nexport default class RemoveColumnCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst editor = this.editor;\n\t\tconst selection = editor.model.document.selection;\n\t\tconst tableUtils = editor.plugins.get( 'TableUtils' );\n\n\t\tconst tableCell = findAncestor( 'tableCell', selection.getFirstPosition() );\n\n\t\tthis.isEnabled = !!tableCell && tableUtils.getColumns( tableCell.parent.parent ) > 1;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst selection = model.document.selection;\n\n\t\tconst firstPosition = selection.getFirstPosition();\n\n\t\tconst tableCell = findAncestor( 'tableCell', firstPosition );\n\t\tconst tableRow = tableCell.parent;\n\t\tconst table = tableRow.parent;\n\n\t\tconst headingColumns = table.getAttribute( 'headingColumns' ) || 0;\n\t\tconst row = table.getChildIndex( tableRow );\n\n\t\t// Cache the table before removing or updating colspans.\n\t\tconst tableMap = [ ...new TableWalker( table ) ];\n\n\t\t// Get column index of removed column.\n\t\tconst cellData = tableMap.find( value => value.cell === tableCell );\n\t\tconst removedColumn = cellData.column;\n\n\t\tmodel.change( writer => {\n\t\t\t// Update heading columns attribute if removing a row from head section.\n\t\t\tif ( headingColumns && row <= headingColumns ) {\n\t\t\t\twriter.setAttribute( 'headingColumns', headingColumns - 1, table );\n\t\t\t}\n\n\t\t\tfor ( const { cell, column, colspan } of tableMap ) {\n\t\t\t\t// If colspaned cell overlaps removed column decrease it's span.\n\t\t\t\tif ( column <= removedColumn && colspan > 1 && column + colspan > removedColumn ) {\n\t\t\t\t\tupdateNumericAttribute( 'colspan', colspan - 1, cell, writer );\n\t\t\t\t} else if ( column === removedColumn ) {\n\t\t\t\t\t// The cell in removed column has colspan of 1.\n\t\t\t\t\twriter.remove( cell );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}